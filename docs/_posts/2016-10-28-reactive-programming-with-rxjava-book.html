---
layout: post
title: Reactive Programming with RxJava book published
date: '2016-10-28T12:29:00.000+02:00'
author: Tomasz Nurkiewicz
tags:
- books
- rxjava
modified_time: '2016-10-28T12:29:14.721+02:00'
thumbnail: https://2.bp.blogspot.com/-UbS8g6SYkZo/WBMoD_R3jbI/AAAAAAAACcI/NBCU-f-C4JgpiZqWWfh49lMamUYqT0jeQCLcB/s72-c/books.jpg
blogger_id: tag:blogger.com,1999:blog-6753769565491687768.post-4345391673007735507
blogger_orig_url: https://www.nurkiewicz.com/2016/10/reactive-programming-with-rxjava-book.html
---

<div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-UbS8g6SYkZo/WBMoD_R3jbI/AAAAAAAACcI/NBCU-f-C4JgpiZqWWfh49lMamUYqT0jeQCLcB/s1600/books.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="151" src="https://2.bp.blogspot.com/-UbS8g6SYkZo/WBMoD_R3jbI/AAAAAAAACcI/NBCU-f-C4JgpiZqWWfh49lMamUYqT0jeQCLcB/s200/books.jpg" width="200" /></a></div>"<strong>Reactive Programming with RxJava: Creating Asynchronous, Event-Based Applications</strong>" book was finally published on paper.<br />More than a year of hard work resulted in almost 350 pages packed with RxJava and touching various technologies like Android, Camel, NoSQL, Hystrix and more. It's available as an ebook and in paperback at <a href="http://shop.oreilly.com/product/0636920042228.do">official O'Reilly store</a> as well as on <a href="http://amzn.to/2fdn8vU">Amazon</a>. But rather than making a sales pitch I'd like to share some of my experiences with writing my first book.<br /><br /><h1 id="atlas-is-great">Atlas is great</h1>All authors writing for O'Reilly get access to <a href="https://atlas.oreilly.com/"><em>Atlas</em></a> - their publishing platform. Atlas is like a combination of GitHub and Jenkins - it hosts your books in built-in git repository and "builds" them. For developers the user experience is very familiar. The one and only source of your book is in O'Reilly-hosted git repository. You can use it as any other repository: commit changes, push to branches, pull revisions from other authors. You can quickly see history of given chapter, revert, etc.<br /><br />This is all possible because supported formats (AsciiDoc and DocBook) are purely text-based. More on editing later. Atlas also has <a href="http://docs.atlas.oreilly.com/index.html">great documentation</a> and <a href="http://chimera.labs.oreilly.com/books/1230000000065/index.html">Getting Started guide</a>. Whenever you feel like it you can browse to your book in Atlas (looks like a stripped-down GitHub web interface) and click <em>Build</em>. In about a minute Atlas will show links to PDF, epub, mobi and HTML version of your book. All having consistent look and feel looking almost like a complete publication. The whole process is controlled via tiny <code>atlas.json</code> configuration file. If you want to automate it even further, Atlas exposes an API and command-line interface. I scripted <code>git push</code> so that it was immediately followed by building of final book in various formats and downloading them:<br /><br /><pre class="brush: plain">#!/bin/bash<br /><br />if [ -z "$OREILLY_API_TOKEN" ]<br />then<br />  echo "Set OREILLY_API_TOKEN variable first"<br />  exit 1<br />fi<br /><br />FORMAT=$@<br />if [ -z "$FORMAT" ]<br />then<br />    FORMAT='pdf'<br />fi<br /><br />grep TODO *.asc<br />git add . -A<br />git commit -m "WIP"<br />git push origin HEAD -f<br />if [[ $FORMAT != *"none"* ]]<br />then<br />    rm -rf target<br />    mkdir -p target<br />    echo 'Building in Atlas...'<br />    time atlas build $OREILLY_API_TOKEN oreillymedia/book-name $FORMAT `git rev-parse --abbrev-ref HEAD` | tee target/atlas.log<br />    echo 'Downloading...'<br />    grep "PDF: "  target/atlas.log | sed 's/PDF: //'  | xargs -r wget -qO target/rxjava.pdf<br />    grep "MOBI: " target/atlas.log | sed 's/MOBI: //' | xargs -r wget -qO target/rxjava.mobi<br />    grep "EPUB: " target/atlas.log | sed 's/EPUB: //' | xargs -r wget -qO target/rxjava.epub<br />    if [ -e target/rxjva.pdf ]<br />    then<br />        echo 'Opening...'<br />        evince target/rxjava.pdf &amp;<br />    fi<br />fi</pre>I'm not a <code>bash</code> expert but what it does is:<br /><br /><ol style="list-style-type: decimal;"><li>Making sure <code>OREILLY_API_TOKEN</code> is set - required for authentication</li><li>Determining the target format(s) we are interested in (comma separated)</li><li>Shows all <code>TODO</code> comments so that I can fix them next time (yeah, it should probably interrupt in case there are any...)</li><li><code>git commit</code> followed by <code>git push</code> of current branch (I never worked on <code>master</code> until chapter was finished so <code>-f</code> is... OK?)</li><li>If building of book was requested I run <code>atlas</code> <a href="http://docs.atlas.oreilly.com/api.html">CLI command</a>. <code>git rev-parse --abbrev-ref HEAD</code> yields current branch name because Atlas can build any branch</li><li>The standard output of the CLI tool prints URLs to final versions of book. I extract and download them using <code>wget</code></li><li>Finally if PDF was downloaded, I open it immediately using <a href="https://wiki.gnome.org/Apps/Evince"><code>evince</code></a> browser</li></ol>The whole process takes about one minute so with one command I can publish my work in AsciiDoc and see the final book in beautiful PDF. Atlas does all the formatting, table of contents, index, cover, cross-reference links, etc. That being said it wasn't always painful. I ran into bizarre:<br /><br /><pre class="brush: plain">- /usr/AHFormatterV62_64/run.sh: line 35: 11589 Segmentation fault      "${AHF62_64_BIN_FOLDER}/AHFCmd" "$@"</pre>once in a while. However this problem was quickly fixed by O'Reilly team. Also AsciiDoc did not always rendered the way we expected, especially complex tables. I can't compare Atlas with <a href="https://leanpub.com/">Leanpub</a> (which <a href="https://leanpub.com/blog/2016/10/leanpub-and-pricing">recently became non-free for authors</a>) but I suspect they are similar in functionality. I'm not sure how other publishers are hosting and distributing manuscripts. I can't imagine using Microsoft Word distributed over e-mail or other non-developer friendly workflow. From a developer perspective O'Reilly is fantastic.<br /><br /><h1 id="day-to-day-writing">Day-to-day writing</h1>I wrote the entire book in <a href="https://www.sublimetext.com/">Sublime Text</a>. Typically in Distraction Free Mode so my workspace looked as follows:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-2daxh7z-d0M/WBMn9QwoftI/AAAAAAAACb8/nTPJc-ad3QcSPg3V3AJ7uANeF_1VuZB4wCEw/s1600/editor.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="180" src="https://2.bp.blogspot.com/-2daxh7z-d0M/WBMn9QwoftI/AAAAAAAACb8/nTPJc-ad3QcSPg3V3AJ7uANeF_1VuZB4wCEw/s320/editor.png" width="320" /></a></div><br /><br />Seriously. I didn't use LaTeX because AsciiDoc was sufficient. Tip for writing in AsciiDoc and Markdown: one sentence per line. Not more, not less. Screen width is a natural limit of how long one sentence should be. Also it's much simpler to move sentences around, delete them and find repetitions. From markup language perspective single line break is transparent, you need at least two to start a new paragraph. Writing in a markup language as opposed to binary format like <code>docx</code> has another advantage: <code>grep</code>, <code>sed</code> and other UNIX goodies work as expected.<br /><br />To catch simple grammar and typos I installed spell checking in Sublime Text. I configured Sublime a little bit to work better for me:<br /><br /><pre class="brush: plain">{<br />    "added_words":<br />    [<br />        "backpressure",<br />        "unsubscription",<br />        "Hystrix",<br />        "servlet"<br />    ],<br />    "color_scheme": "Packages/Color Scheme - Default/Dawn.tmTheme",<br />    "font_size": 13,<br />    "highlight_line": true,<br />    "rulers":<br />    [<br />        70<br />    ],<br />    "spell_check": true<br />}</pre>Couple of words are so common yet unheard of in traditional English that I added them to a dictionary: <code>added_words</code>. <code>highlight_line</code> shows a horizontal light blue line where caret currently is. <code>rulers</code> on the other hand displays vertical line at column 70, which happens to be a line length limit for code listings. You have to be very creative in order to fit code in 70 characters and remain readable. Especially when writing Java, where class names are not much shorter...<br /><br />I also appreciated the help of <a href="https://www.powerthesaurus.org/">Powerthesaurus</a>. I'm not a native English speaker (by far...) so finding a synonym once in a while to avoid too childish or boring style was very useful. Luckily the editors and proof readers made tons of corrections to my manuscript so if you were annoyed by my grammar or style in early releases, the final book should be much better. I was also asked to entirely rewrite several sentences which were hard to understand.<br /><br /><h1 id="reviewers">Reviewers</h1>A great number of people helped us in writing this book. I would like to especially thank reviewers: <a href="http://akarnokd.blogspot.com/">Dávid Karnok</a> and <a href="http://www.agiledeveloper.com/">Venkat Subramaniam</a>. Dávid's feedback was very detailed and many times I felt really foolish making simple mistakes and misunderstandings. Venkat on the other hand provided a lot of feedback related to overall reading flow. I rearranged and removed whole chapters based on his feedback (see: <a href="http://www.nurkiewicz.com/2016/06/functor-and-monad-examples-in-plain-java.html">Functor and monad examples in plain Java</a>). Their work was great and I truly appreciate it. Thank you guys!<br /><br /><h1 id="summary">Summary</h1>I'm proud to be the <a href="http://www.oreilly.com/pub/au/6868">first Polish author</a> for O'Reilly, quickly followed by my friend <a href="http://www.oreilly.com/pub/au/7222">Konrad Malawski</a>. The book is out and it reached #1 and #2 "<em>Hot New Releases</em>" in <em>Object-Oriented Design</em> and <em>Parallel Computer Programming</em> categories on Amazon quickly after release:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-fp4AJhvzpLg/WBMn9rDLptI/AAAAAAAACcA/nVwR_rQAILUoaqmxItJR_ezYeiYTcpXiwCEw/s1600/ood.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="112" src="https://1.bp.blogspot.com/-fp4AJhvzpLg/WBMn9rDLptI/AAAAAAAACcA/nVwR_rQAILUoaqmxItJR_ezYeiYTcpXiwCEw/s200/ood.png" width="200" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-4gg5mu5Tvvw/WBMn9zTTkKI/AAAAAAAACcE/aGLvo_BoDAw7mqS0TgolPnBLxALjw1HAQCEw/s1600/parallel.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="112" src="https://3.bp.blogspot.com/-4gg5mu5Tvvw/WBMn9zTTkKI/AAAAAAAACcE/aGLvo_BoDAw7mqS0TgolPnBLxALjw1HAQCEw/s200/parallel.png" width="200" /></a></div><br /><br />"Reactive Programming with RxJava" was based on RxJava 1.x. In the meantime the works on RxJava 2.x (led by aforementioned Dávid Karnok) are very advanced and it should soon be released. This does not make the book obsolete, about 90% of the content is still applicable. However when RxJava 2.x is released and Java ecosystem begins to incorporate it (e.g. RxNetty, Reactive Camel and so on) we (Ben and myself) are considering upgrading the book and releasing second edition. Yet for the time being our book should be quite comprehensive source of reactive programming knowledge. Have fun reading and I'm looking for feedback!<br /><br /><script>SyntaxHighlighter.highlight();</script>