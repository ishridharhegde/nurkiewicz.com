---
layout: post
title: GeeCON programming contest answers
date: '2015-10-27T11:59:00.000+01:00'
author: Tomasz Nurkiewicz
tags: 
modified_time: '2015-10-27T12:04:54.422+01:00'
blogger_id: tag:blogger.com,1999:blog-6753769565491687768.post-4966260039455586733
blogger_orig_url: https://www.nurkiewicz.com/2015/10/geecon-programming-contest-answers.html
---

During this year's <a href="http://2015.geecon.org/">GeeCON</a> and <a href="http://2015.geecon.cz/">GeeCON Prague</a> my company <a href="http://www.4financeit.com/">4FinanceIT</a> was giving away some gifts for people who correctly answered a couple of programming questions. Quite a few people asked about <em>correct</em> answers. Since I happened to write these tasks along with sample answers, let's share them publicly then:<br /><h1 id="which-of-the-following-will-not-work-as-expected-in-multi-threaded-environment-choose-one">1. Which of the following will not work as expected in multi-threaded environment (choose one)?</h1><pre class="brush: java"><br />new LongAccumulator(Math::min, Integer.MAX_VALUE);  //a)<br />new LongAccumulator(Math::max, Integer.MIN_VALUE);  //b)<br />new LongAccumulator(Math::addExact, 0);             //c)<br />new LongAccumulator(Math::subtractExact, 0)         //d)</pre><h2 id="answer-d---according-to-javadoc">Answer <code>d)</code> - according to JavaDoc:</h2><blockquote>this class is only applicable to functions for which the order of accumulation does not matter</blockquote>Let's say you are accumulating <code>1</code> and <code>2</code>. The result can be <code>0 - 1 - 2</code> but also <code>(0 - 1) - (0 - 2)</code> or <code>(0 - 2) - (0 - 1)</code>.<br />See also: <a href="http://www.nurkiewicz.com/2015/06/how-longaccumulator-and.html">How LongAccumulator and DoubleAccumulator classes work?</a><br /><hr /><h1 id="implement-the-following-function">2. Implement the following function:</h1><pre class="brush: java">static &lt;T&gt; List&lt;T&gt; extractPresent(List&lt;java.util.Optional&lt;T&gt;&gt; opts) {<br />    //...<br />}</pre><h2 id="answer">Answer</h2>Possible implementations (not exhaustive):<br /><pre class="brush: java">static &lt;T&gt; List&lt;T&gt; extractPresent(List&lt;Optional&lt;T&gt;&gt; opts) {<br />    final List&lt;T&gt; result = new ArrayList&lt;&gt;();<br />    for (Optional&lt;T&gt; opt : opts) {<br />        if(opt.isPresent()) {<br />            result.add(opt.get());<br />        }<br />    }<br />    return result;<br />}<br /><br />static &lt;T&gt; List&lt;T&gt; extractPresent(List&lt;Optional&lt;T&gt;&gt; opts) {<br />    final List&lt;T&gt; result = new ArrayList&lt;&gt;();<br />    opts.forEach(opt -&gt; {<br />        if(opt.isPresent()) {<br />            result.add(opt.get());<br />        }<br />    });<br />    return result;<br />}<br /><br />static &lt;T&gt; List&lt;T&gt; extractPresent(List&lt;Optional&lt;T&gt;&gt; opts) {<br />    return opts.stream()<br />            .flatMap(opt -&gt; opt.map(Collections::singletonList)<br />                    .orElse(Collections.emptyList())<br />                    .stream())<br />            .collect(toList());<br />}<br /><br />static &lt;T&gt; List&lt;T&gt; extractPresent(List&lt;Optional&lt;T&gt;&gt; opts) {<br />    return opts.stream()<br />            .reduce(new ArrayList&lt;&gt;(), (list, opt) -&gt; {<br />                opt.ifPresent(list::add);<br />                return list;<br />            }, (list1, list2) -&gt; { list1.addAll(list2); return list1; });<br />}</pre>Bonus points if you use Java 9 for that, which has <code>Optional.stream()</code> playing great with <code>flatMap()</code>. See: <a href="https://bugs.openjdk.java.net/browse/JDK-8050820">JDK-8050820</a>.<br /><hr /><h1 id="why-is-the-following-http-request-response-pair-non-idiomatic-restful-service">3. Why is the following HTTP request-response pair non-idiomatic RESTful service?</h1><pre class="brush: plain">&gt; POST /user.xml?action=delete HTTP/1.1<br />&gt; &lt;id&gt;42&lt;/id&gt;<br /><br />...<br /><br />&lt; HTTP/1.1 503 Internal server error<br />&lt; {"error": "User 42 not found"</pre><h2 id="answer-1">Answer</h2><ul><li><code>POST</code> used to delete, consider <code>DELETE</code> HTTP method</li><li>Verb (<em>delete</em>) in URI</li><li><code>.xml</code> extension to signal content type, consider <code>Accept</code> header</li><li>Singular resource name, plurar tend to be more popular</li><li>ID passed in request body, consider <code>/users/42</code> URI instead</li><li>5xx server-side error used to indicate client-side mistake (wrong ID)</li><li>Error returned in JSON while request was in XML</li></ul><hr />Hope you enjoyed the competition and prizes!  <script>SyntaxHighlighter.highlight();</script>