---
layout: post
title: EJB 3.1 Cookbook by Richard Reese review
date: '2011-07-21T21:15:00.002+02:00'
author: Tomasz Nurkiewicz
tags:
- ejb
- review
- books
modified_time: '2011-11-17T19:23:18.307+01:00'
thumbnail: http://1.bp.blogspot.com/-dx9wGAdz8wU/Tih2oRruzsI/AAAAAAAAAfM/O4PSHdelZQg/s72-c/51DWCsuRDVL._SS500_.jpg
blogger_id: tag:blogger.com,1999:blog-6753769565491687768.post-1002127732823020463
blogger_orig_url: https://www.nurkiewicz.com/2011/07/ejb-31-cookbook-by-richard-reese-review.html
---

<div>Recently I received a copy of EJB 3.1 Cookbook (courtesy to <a href="http://www.packtpub.com/">Packt Publishing</a>) with a kind request to prepare a review. And since I have just got my new <a href="http://www.amazon.com/?tag=javaandneighb-20&amp;camp=0&amp;creative=0&amp;linkCode=as4">Kindle reader</a>, this was a great opportunity to test them together.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-dx9wGAdz8wU/Tih2oRruzsI/AAAAAAAAAfM/O4PSHdelZQg/s1600/51DWCsuRDVL._SS500_.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://1.bp.blogspot.com/-dx9wGAdz8wU/Tih2oRruzsI/AAAAAAAAAfM/O4PSHdelZQg/s320/51DWCsuRDVL._SS500_.jpg" width="320" /></a></div></div><div><a href="http://www.packtpub.com/ejb-3-1-cookbook/book"></a>  <br /><div style="margin-bottom: 0cm;"><a href="http://www.packtpub.com/ejb-3-1-cookbook/book">EJB 3.1 Cookbook</a> by Richard Reese aims to provide “<i>a collection of simple but incredibly effective recipes</i>” – quoting the subtitle. The book covers expected part of the EJB stack: session and message-driven beans, JPA, security, interceptors, timer service and web services. Contents are</div>organized around so called <i>recipes</i> – short (no more than three pages long) micro-chapters focused on one specific issue. This is the most advantageous feature of this publication: all recipes all self-contained most of the time, so one can jump between them and apply the most suitable in given scenario. This makes the book suitable for both the beginners, which should read it from cover to cover and slightly more experienced developers. However the latter ones will probably  prefer more comprehensive sources and skip significant parts of the book.</div><div><br /></div><div>Although I found the book structure very convenient, contents (both granularity and volume) are highly subjective and controversial. On the one hand the author devotes five recipes to describe separately each JMS message type (string, byte, stream, map and object) – each one is almost identical. Whilst he could only list different types, he fills half of the JMS chapter this way (<i>sic!</i>) On the other hand, there is only one recipe explaining new JPA 2.0 Criteria API – to make matters worse, only using weakly typed queries. Probably one of the most important new features in EJB 3.1 stack has been covered on two pages. And this API is not particularly easy to grasp. To depict you the scale – the art of adding Bean Validation annotations (<span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">@NotNull</span> etc.) on fields required ten pages and eight recipes... Where a half-page bullet-list would suffice.</div><div><br /></div><div>The last chapter – <i>EJB Techniques </i>– is very intriguing. Lots of valuable and accurate tips have been given, like the difference between <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">Date</span> and <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">Calendar</span>, logging and dealing with exceptions, effective <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">String</span> manipulations. Despite appearances, this is not the basic Java knowledge and many experienced programmers still don't know that <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">SimpleDateFormat</span> is not thread-safe and that <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">Date</span> class does not store time zone. I am really happy that this kind of knowledge found its way in the book. Unfortunately – in the wrong one. That being said, there are more appropriate books, not focused on EJB or even Java EE. Here it just looks like putting anything useful to reach dozen chapters in total.</div><div><br /><a name='more'></a><br /></div><div>There are however bright sides as well. I particularly enjoyed <i>Transaction Processing</i> and <i>Interceptors</i> chapters. In the former one the author briefly but succinctly explains different transaction propagation and error handling behaviours, very important topics. Table on page 210 captures the essence of transaction demarcation in few simple rules, brilliant in its simplicity. In the interceptors chapter the recipes are focused on typical cross-cutting concerns, forming handy starting point. Also pretty informative.</div><div><br /></div><div>When in comes to code examples and use-cases, they were generally interesting and well thought. Nevertheless, I am still awfully confused after reading a recipe on @Singleton: “<i>We will assume that our game will never have more than one player so a singleton is an appropriate choice </i>” - says the author to justify the usage of singleton to store user attributes. Yes, I think we are all using Enterprise Java Beans and Application Servers to develop systems that would never have more than one user at a time... (Hint: statefull session bean) The same thing with the usage of <i><a href="http://en.wikipedia.org/wiki/Facade_pattern">Facade</a></i> pattern throughout the book. First the author quotes the exact definition of this design pattern and then names a class wrapping <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">EntityManager</span> and providing convenient, strongly typed <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">create()</span>, <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">remove()</span>, <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">findAll()</span>, etc. - <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">PatientFacade</span>. No, this class is not hiding the complexity of <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">Patient</span> entity, and all programmers all over the world would call this abstraction a <i>Repository</i> or <i>DAO</i>. Not here.</div><div><br /></div><div>By the way in the same recipe one-to-many relationship is introduced between a patient and medication, where clearly many-to-many is required. Curiously enough, in the next recipe <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">DISTINCT</span> SQL statement is used to filter out duplications that have appeared due to denormalization. Well, if the database was designed properly, there wouldn't be any duplicates on the first place... After all these misleading and sometimes harmful advices, typos and errors in source codes (<i style="font-family: &quot;Courier New&quot;,Courier,monospace;">ClassNoDefException</i>? - never heard of it...) are not that irritating.</div><div><br /></div><div>In conclusion, despite all the deficiencies and inconsistencies, I mostly enjoyed reading this book. Once again I will highlight the very elegant chapter-recipe structure and the fixed layout inside each recipe. I believe it is suitable for people that suddenly inherited an EJB application and need an immediate help and suggestions. However on the long run, they should invest in more comprehensive publication. Few years back I managed to pass SCBCD exam (EJB 3.0 by that time) after reading <a href="http://www.amazon.com/gp/product/059600978X/ref=as_li_ss_tl?ie=UTF8&amp;tag=javaandneighb-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399377&amp;creativeASIN=059600978X">Enterprise JavaBeans 3.0</a>. With the book in question it would be virtually impossible. If you need a quick and dirty, yet entertaining source of ready solutions, go ahead. Otherwise, definitely look for something broader and less verbose.</div>